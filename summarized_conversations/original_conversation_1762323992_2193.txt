{'role': 'assistant', 'content': 'Now let\'s create the Node.js webhook files:\n\n<function_calls>\n<create-file file_path="HEX-Control-Nexus/backend/node_webhooks/index.js">\nconst express = require(\'express\');\nconst http = require(\'http\');\nconst WebSocket = require(\'ws\');\nconst path = require(\'path\');\nrequire(\'dotenv\').config();\n\nconst app = express();\nconst server = http.createServer(app);\nconst wss = new WebSocket.Server({ server });\n\n// Middleware\napp.use(express.json());\napp.use(express.static(\'public\'));\n\n// Store for active jobs\nconst jobs = new Map();\nlet nextJobId = 1;\n\n// WebSocket connection handling\nwss.on(\'connection\', (ws) => {\n    console.log(\'New client connected to WebSocket\');\n    \n    // Send initial connection message\n    ws.send(JSON.stringify({\n        type: \'connection\',\n        message: \'Connected to HEX Control Nexus WebSocket\'\n    }));\n    \n    ws.on(\'close\', () => {\n        console.log(\'Client disconnected from WebSocket\');\n    });\n});\n\n// Broadcast to all WebSocket clients\nfunction broadcastToClients(message) {\n    const data = JSON.stringify(message);\n    wss.clients.forEach((client) => {\n        if (client.readyState === WebSocket.OPEN) {\n            client.send(data);\n        }\n    });\n}\n\n// Webhook endpoint\napp.post(\'/webhook\', (req, res) => {\n    const signature = req.get(\'X-Hub-Signature\');\n    const eventType = req.get(\'X-GitHub-Event\') || \'generic\';\n    const payload = req.body;\n    \n    console.log(`Received webhook event: ${eventType}`);\n    \n    // Create a new job\n    const jobId = nextJobId++;\n    const job = {\n        id: jobId,\n        eventType: eventType,\n        payload: payload,\n        status: \'queued\',\n        createdAt: new Date().toISOString()\n    };\n    \n    jobs.set(jobId, job);\n    \n    // Broadcast job creation to WebSocket clients\n    broadcastToClients({\n        type: \'job_created\',\n        job: job\n    });\n    \n    // Process the job asynchronously\n    processJob(jobId);\n    \n    // Respond immediately with job ID\n    res.status(202).json({\n        message: \'Webhook received and queued for processing\',\n        jobId: jobId\n    });\n});\n\n// Process job function (simulated)\nasync function processJob(jobId) {\n    const job = jobs.get(jobId);\n    if (!job) return;\n    \n    job.status = \'processing\';\n    job.startedAt = new Date().toISOString();\n    \n    // Broadcast status update\n    broadcastToClients({\n        type: \'job_status\',\n        job: job\n    });\n    \n    try {\n        // Simulate work (in a real app, this would do actual processing)\n        await new Promise(resolve => setTimeout(resolve, 3000));\n        \n        job.status = \'completed\';\n        job.completedAt = new Date().toISOString();\n        \n        // Broadcast completion\n        broadcastToClients({\n            type: \'job_completed\',\n            job: job\n        });\n        \n        console.log(`Job ${jobId} completed successfully`);\n    } catch (error) {\n        job.status = \'failed\';\n        job.error = error.message;\n        job.completedAt = new Date().toISOString();\n        \n        // Broadcast failure\n        broadcastToClients({\n            type: \'job_failed\',\n            job: job,\n            error: error.message\n        });\n        \n        console.error(`Job ${jobId} failed:`, error);\n    }\n    \n    jobs.set(jobId, job);\n}\n\n// Get job status\napp.get(\'/jobs/:id\', (req, res) => {\n    const jobId = parseInt(req.params.id);\n    const job = jobs.get(jobId);\n    \n    if (!job) {\n        return res.status(404).json({ error: \'Job not found\' });\n    }\n    \n    res.json(job);\n});\n\n// Get all jobs\napp.get(\'/jobs\', (req, res) => {\n    const allJobs = Array.from(jobs.values());\n    res.json(allJobs);\n});\n\n// Health check endpoint\napp.get(\'/health\', (req, res) => {\n    res.status(200).json({\n        status: \'healthy\',\n        timestamp: new Date().toISOString(),\n        service: \'HEX Control Nexus Webhooks\'\n    });\n});\n\n// Metrics endpoint\napp.get(\'/metrics\', (req, res) => {\n    const totalJobs = jobs.size;\n    const completedJobs = Array.from(jobs.values()).filter(j => j.status === \'completed\').length;\n    const failedJobs = Array.from(jo...\n The full message content is stored at /workspace/summarized_conversations/original_conversation_1762323873_3974.txt'}