{'role': 'assistant', 'content': '<function_calls>\n<full-file-rewrite file_path="HEX-Control-Nexus/web_dashboard/app.js">\n// HEX Control Nexus Dashboard Application\nconsole.log(\'HEX Control Nexus Dashboard Loading...\');\n\n// DOM Elements\nconst logsContainer = document.getElementById(\'logsContainer\');\nconst jobsTableBody = document.getElementById(\'jobsTableBody\');\nconst totalJobsEl = document.getElementById(\'totalJobs\');\nconst completedJobsEl = document.getElementById(\'completedJobs\');\nconst failedJobsEl = document.getElementById(\'failedJobs\');\nconst pendingJobsEl = document.getElementById(\'pendingJobs\');\nconst startScrapingBtn = document.getElementById(\'startScraping\');\nconst stopScrapingBtn = document.getElementById(\'stopScraping\');\nconst triggerWebhookBtn = document.getElementById(\'triggerWebhook\');\nconst clearLogsBtn = document.getElementById(\'clearLogs\');\nconst autoScrollCheckbox = document.getElementById(\'autoScroll\');\n\n// State\nlet jobs = [];\nlet logEntries = [];\nlet ws = null;\n\n// Add log entry to the logs container\nfunction addLogEntry(level, message) {\n    const timestamp = new Date().toISOString().substr(11, 8);\n    const logEntry = {\n        timestamp,\n        level,\n        message\n    };\n    \n    logEntries.push(logEntry);\n    \n    const logElement = document.createElement(\'div\');\n    logElement.className = \'log-entry\';\n    logElement.innerHTML = `\n        <span class="timestamp">[${timestamp}]</span>\n        <span class="level ${level}">${level.toUpperCase()}</span>\n        <span class="message">${message}</span>\n    `;\n    \n    logsContainer.appendChild(logElement);\n    \n    if (autoScrollCheckbox.checked) {\n        logsContainer.scrollTop = logsContainer.scrollHeight;\n    }\n    \n    // Limit log entries to prevent memory issues\n    if (logEntries.length > 1000) {\n        logEntries = logEntries.slice(-500);\n        // In a real app, we\'d update the DOM as well\n    }\n}\n\n// Update jobs table\nfunction updateJobsTable() {\n    if (jobs.length === 0) {\n        jobsTableBody.innerHTML = \'<tr><td colspan="5" class="no-data">No jobs in queue</td></tr>\';\n        return;\n    }\n\n    jobsTableBody.innerHTML = jobs.map(job => `\n        <tr>\n            <td>${job.id}</td>\n            <td>${job.task}</td>\n            <td>${job.target}</td>\n            <td><span class="status-badge ${job.status}">${job.status}</span></td>\n            <td>${new Date(job.createdAt).toLocaleTimeString()}</td>\n        </tr>\n    `).join(\'\');\n\n    // Update counters\n    totalJobsEl.textContent = jobs.length;\n    completedJobsEl.textContent = jobs.filter(j => j.status === \'completed\').length;\n    failedJobsEl.textContent = jobs.filter(j => j.status === \'failed\').length;\n    pendingJobsEl.textContent = jobs.filter(j => j.status === \'queued\' || j.status === \'processing\').length;\n}\n\n// Connect to WebSocket\nfunction connectWebSocket() {\n    // In a demo environment, we\'ll simulate WebSocket messages\n    addLogEntry(\'info\', \'Simulating WebSocket connection for demo purposes\');\n    \n    // Simulate periodic updates\n    setInterval(() => {\n        // Randomly add log entries\n        if (Math.random() > 0.7) {\n            const messages = [\n                \'System health check passed\',\n                \'Database connection stable\',\n                \'Processing queue status: OK\',\n                \'Memory usage within normal limits\'\n            ];\n            addLogEntry(\'info\', messages[Math.floor(Math.random() * messages.length)]);\n        }\n        \n        // Randomly update job status\n        if (jobs.length > 0 && Math.random() > 0.8) {\n            const processingJobs = jobs.filter(j => j.status === \'processing\');\n            if (processingJobs.length > 0) {\n                const job = processingJobs[Math.floor(Math.random() * processingJobs.length)];\n                if (Math.random() > 0.5) {\n                    job.status = \'completed\';\n                    job.completedAt = new Date().toISOString();\n                    addLogEntry(\'info\', `Job ${job.id} completed successfully`);\n                } else {\n                    job.status = \'failed\';\n                    job.failedAt = new Date().toISOString();\n                    addLogEntry(\'error\', `Job ${job.id} failed`);\n                }\n                updateJobsTable();\n            }\n        }\n    }, 5000);\n}\n\n// Trigger a demo scraping job\nfunction triggerDemoScraping() {\n    addLogEntry(\'info\', \'Triggering demo scraping job...\');\n    \n    // Create a new job\n    const newJob = {\n        id: `job_${Date.now()}`,\n        task: \'web_scrape\',\n        target: \'https://quotes.toscrape.com\',\n        status: \'processing\',\n        createdAt: new Date().toISOString()\n    };\n    \n    jobs.push(newJob);\n    updateJobsTable();\n    \n    addLogEntry(\'info\', `Scraping job ${newJob.id} started for ${newJob.target}`);\n    \n    // Simulate job completion after a delay\n    setTimeout(() => {\n        const jobIndex = jobs.findIndex(j => j.id === newJob.id);\n        if (jobIndex !== -1) {\n            if (Math.random() > 0.2) { // 80% success rate\n                jobs[jobIndex].status = \'completed\';\n                jobs[jobIndex].completedAt = new Date().toISOString();\n                addLogEntry(\'info\', `Scraping job ${newJob.id} completed successfully`);\n            } else {\n                jobs[jobIndex].status = \'failed\';\n                jobs[jobIndex].failedAt = new Date().toISOString();\n                addLogEntry(\'error\', `Scraping job ${newJob.id} failed`);\n            }\n            updateJobsTable();\n        }\n    }, 3000 + Math.random() * 5000); // Random delay between 3-8 seconds\n}\n\n// Trigger a demo webhook\nfunction triggerDemoWebhook() {\n    addLogEntry(\'info\', \'Triggering demo webhook...\');\n    \n    // Create a new job\n    const newJob = {\n        id: `job_${Date.now()}`,\n        task: \'webhook\',\n        target: \'https://httpbin.org/post\',\n        status: \'queued\',\n        createdAt: new Date().toISOString()\n    };\n    \n    jobs.push(newJob);\n    updateJobsTable();\n    \n    addLogEntry(\'info\', `Webhook job ${newJob.id} queued`);\n    \n    // Simulate job processing after a delay\n    setTimeout(() => {\n        const jobIndex = jobs.findIndex(j => j.id === newJob.id);\n        if (jobIndex !== -1) {\n            jobs[jobIndex].status = \'processing\';\n            addLogEntry(\'info\', `Webhook job ${newJob.id} processing`);\n            updateJobsTable();\n            \n            // Simulate completion\n            setTimeout(() => {\n                const jobIndex = jobs.findIndex(j => j.id === newJob.id);\n                if (jobIndex !== -1) {\n                    if (Math.random() > 0.1) { // 90% success rate\n                        jobs[jobIndex].status = \'completed\';\n                        jobs[jobIndex].completedAt = new Date().toISOString();\n                        addLogEntry(\'info\', `Webhook job ${newJob.id} completed successfully`);\n                    } else {\n                        jobs[jobIndex].status = \'failed\';\n                        jobs[jobIndex].failedAt = new Date().toISOString();\n                        addLogEntry(\'error\', `Webhook job ${newJob.id} failed`);\n                    }\n                    updateJobsTable();\n                }\n            }, 2000 + Math.random() * 3000); // Random delay between 2-5 seconds\n        }\n    }, 1000 + Math.random() * 2000); // Random delay between 1-3 seconds\n}\n\n// Clear logs\nfunction clearLogs() {\n    logsContainer.innerHTML = \'\';\n    logEntries = [];\n    addLogEntry(\'info\', \'Logs cleared\');\n}\n\n// Event Listeners\nif (startScrapingBtn) {\n    startScrapingBtn.addEventListener(\'click\', triggerDemoScraping);\n}\n\nif (stopScrapingBtn) {\n    stopScrapingBtn.addEventListener(\'click\', () => {\n        addLogEntry(\'info\', \'Stop scraping requested\');\n    });\n}\n\nif (triggerWebhookBtn) {\n    triggerWebhookBtn.addEventListener(\'click\', triggerDemoWebhook);\n}\n\nif (clearLogsBtn) {\n    clearLogsBtn.addEventListener(\'click\', clearLogs);\n}\n\n// Initialize dashboard\ndocument.addEventListener(\'DOMContentLoaded\', () => {\n    addLogEntry(\'info\', \'HEX Control Nexus Dashboard initialized\');\n    \n    // Connect to WebSocket\n    connectWebSocket();\n    \n    // Add initial jobs for demonstration\n    setTimeout(() => {\n        jobs = [\n            {\n                id: \'job_1001\',\n                task: \'web_scrape\',\n                target: \'https://quotes.toscrape.com\',\n                status: \'completed\',\n                createdAt: new Date(Date.now() - 3600000).toISOString(),\n                completedAt: new Date(Date.now() - 3500000).toISOString()\n            },\n            {\n                id: \'job_1002\',\n                task: \'api_call\',\n                target: \'https://jsonplaceholder.typicode.com/posts\',\n                status: \'completed\',\n                createdAt: new Date(Date.now() - 1800000).toISOString(),\n                completedAt: new Date(Date.now() - 1700000).toISOString()\n            }\n        ];\n        updateJobsTable();\n    }, 1000);\n});\n</full-file-rewrite>\n</function_calls>'}