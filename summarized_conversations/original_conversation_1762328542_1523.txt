{'role': 'assistant', 'content': '<function_calls>\n<create-file file_path="HEX-Control-Nexus/backend/python_core/notifier.py">\nimport smtplib\nimport requests\nfrom email.mime.text import MIMEText\nfrom email.mime.multipart import MIMEMultipart\nimport logging\nimport os\n\n# Configure logging\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\nclass Notifier:\n    def __init__(self):\n        # Load credentials from environment variables\n        self.telegram_token = os.getenv(\'TELEGRAM_BOT_TOKEN\')\n        self.telegram_chat_id = os.getenv(\'TELEGRAM_CHAT_ID\')\n        self.smtp_server = os.getenv(\'SMTP_SERVER\')\n        self.smtp_port = int(os.getenv(\'SMTP_PORT\', 587))\n        self.smtp_user = os.getenv(\'SMTP_USER\')\n        self.smtp_password = os.getenv(\'SMTP_PASSWORD\')\n        self.slack_webhook_url = os.getenv(\'SLACK_WEBHOOK_URL\')\n        self.discord_webhook_url = os.getenv(\'DISCORD_WEBHOOK_URL\')\n\n    def send_telegram_message(self, message):\n        """Send a message via Telegram bot"""\n        if not self.telegram_token or not self.telegram_chat_id:\n            logger.warning("Telegram credentials not configured")\n            return False\n            \n        try:\n            url = f"https://api.telegram.org/bot{self.telegram_token}/sendMessage"\n            data = {\n                \'chat_id\': self.telegram_chat_id,\n                \'text\': message\n            }\n            response = requests.post(url, data=data)\n            response.raise_for_status()\n            logger.info("Telegram message sent successfully")\n            return True\n        except Exception as e:\n            logger.error(f"Failed to send Telegram message: {e}")\n            return False\n\n    def send_email(self, subject, body, to_email):\n        """Send an email notification"""\n        if not all([self.smtp_server, self.smtp_user, self.smtp_password]):\n            logger.warning("Email credentials not configured")\n            return False\n            \n        try:\n            msg = MIMEMultipart()\n            msg[\'From\'] = self.smtp_user\n            msg[\'To\'] = to_email\n            msg[\'Subject\'] = subject\n            \n            msg.attach(MIMEText(body, \'plain\'))\n            \n            server = smtplib.SMTP(self.smtp_server, self.smtp_port)\n            server.starttls()\n            server.login(self.smtp_user, self.smtp_password)\n            server.send_message(msg)\n            server.quit()\n            \n            logger.info("Email sent successfully")\n            return True\n        except Exception as e:\n            logger.error(f"Failed to send email: {e}")\n            return False\n\n    def send_slack_message(self, message):\n        """Send a message to Slack via webhook"""\n        if not self.slack_webhook_url:\n            logger.warning("Slack webhook URL not configured")\n            return False\n            \n        try:\n            data = {\'text\': message}\n            response = requests.post(self.slack_webhook_url, json=data)\n            response.raise_for_status()\n            logger.info("Slack message sent successfully")\n            return True\n        except Exception as e:\n            logger.error(f"Failed to send Slack message: {e}")\n            return False\n\n    def send_discord_message(self, message):\n        """Send a message to Discord via webhook"""\n        if not self.discord_webhook_url:\n            logger.warning("Discord webhook URL not configured")\n            return False\n            \n        try:\n            data = {\'content\': message}\n            response = requests.post(self.discord_webhook_url, json=data)\n            response.raise_for_status()\n            logger.info("Discord message sent successfully")\n            return True\n        except Exception as e:\n            logger.error(f"Failed to send Discord message: {e}")\n            return False\n\n    def send_notification(self, message, notification_type=\'all\'):\n        """Send notification through all configured channels"""\n        results = []\n        \n        if notification_type in [\'telegram\', \'all\']:\n            results.append(self.send_telegram_message(message))\n            \n        if notification_type in [\'slack\', \'all\']:\n            results.append(self.send_slack_message(message))\n            \n        if notification_type in [\'discord\', \'all\']:\n            results.append(self.send_discord_message(message))\n            \n        # For email, we need additional parameters\n        if notification_type == \'email\':\n            # This would need to be called separately with subject, body, and recipient\n            logger.warning("Email requires separate parameters. Use send_email method directly.")\n            results.append(False)\n            \n        return any(results) if results else False\n\n# Example usage\nif __name__ == "__main__":\n    notifier = Notifier()\n    \n    # Send test notifications\n    test_message = "HEX Control Nexus Notification Test"\n    \n    # Send to all configured channels\n    success = notifier.send_notification(test_message)\n    \n    if success:\n        print("Notification sent successfully")\n    else:\n        print("Failed to send notification")\n</create-file>\n</function_calls>'}