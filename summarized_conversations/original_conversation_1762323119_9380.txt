{'role': 'assistant', 'content': 'Now let\'s create the JavaScript files for the web dashboard:\n\n<function_calls>\n<create-file file_path="HEX-Control-Nexus/web_dashboard/app.js">\n// HEX Control Nexus Dashboard Application\nconsole.log(\'HEX Control Nexus Dashboard Loading...\');\n\n// DOM Elements\nconst logsContainer = document.getElementById(\'logs-container\');\nconst jobsTableBody = document.getElementById(\'jobs-table-body\');\nconst activeJobsCount = document.getElementById(\'active-jobs-count\');\nconst completedCount = document.getElementById(\'completed-count\');\nconst startAllBtn = document.getElementById(\'start-all-btn\');\nconst stopAllBtn = document.getElementById(\'stop-all-btn\');\nconst refreshBtn = document.getElementById(\'refresh-btn\');\n\n// State\nlet jobs = [];\nlet ws = null;\n\n// Add log entry to the logs container\nfunction addLogEntry(level, message) {\n    const timestamp = new Date().toISOString().substr(11, 8);\n    const logEntry = document.createElement(\'div\');\n    logEntry.className = \'log-entry\';\n    logEntry.innerHTML = `\n        <span class="timestamp">[${timestamp}]</span>\n        <span class="level ${level}">${level.toUpperCase()}</span>\n        <span>${message}</span>\n    `;\n    logsContainer.appendChild(logEntry);\n    logsContainer.scrollTop = logsContainer.scrollHeight;\n}\n\n// Update jobs table\nfunction updateJobsTable() {\n    if (jobs.length === 0) {\n        jobsTableBody.innerHTML = \'<tr><td colspan="6" style="text-align: center;">No active jobs</td></tr>\';\n        return;\n    }\n\n    jobsTableBody.innerHTML = jobs.map(job => `\n        <tr>\n            <td>${job.id}</td>\n            <td>${job.task}</td>\n            <td>${job.target}</td>\n            <td><span class="status-badge ${job.status}">${job.status}</span></td>\n            <td>${new Date(job.createdAt).toLocaleTimeString()}</td>\n            <td>\n                <button class="btn btn-sm btn-secondary" onclick="viewJob(\'${job.id}\')">View</button>\n                ${job.status === \'processing\' ? \n                    `<button class="btn btn-sm btn-danger" onclick="cancelJob(\'${job.id}\')">Cancel</button>` :\n                    \'\'}\n            </td>\n        </tr>\n    `).join(\'\');\n\n    // Update counters\n    const activeJobs = jobs.filter(j => j.status === \'processing\' || j.status === \'queued\').length;\n    const completedJobs = jobs.filter(j => j.status === \'completed\').length;\n    \n    activeJobsCount.textContent = activeJobs;\n    completedCount.textContent = completedJobs;\n}\n\n// Connect to WebSocket\nfunction connectWebSocket() {\n    const wsUrl = `ws://${window.location.host}`;\n    ws = new WebSocket(wsUrl);\n    \n    ws.onopen = function() {\n        addLogEntry(\'info\', \'Connected to HEX Control Nexus WebSocket\');\n    };\n    \n    ws.onmessage = function(event) {\n        try {\n            const data = JSON.parse(event.data);\n            handleWebSocketMessage(data);\n        } catch (error) {\n            addLogEntry(\'error\', `Failed to parse WebSocket message: ${error.message}`);\n        }\n    };\n    \n    ws.onclose = function() {\n        addLogEntry(\'warning\', \'WebSocket connection closed. Reconnecting in 5 seconds...\');\n        setTimeout(connectWebSocket, 5000);\n    };\n    \n    ws.onerror = function(error) {\n        addLogEntry(\'error\', `WebSocket error: ${error.message}`);\n    };\n}\n\n// Handle WebSocket messages\nfunction handleWebSocketMessage(data) {\n    switch (data.type) {\n        case \'connection\':\n            addLogEntry(\'info\', data.message);\n            break;\n            \n        case \'job_created\':\n            jobs.push(data.job);\n            updateJobsTable();\n            addLogEntry(\'info\', `Job ${data.job.id} created for task: ${data.job.task}`);\n            break;\n            \n        case \'job_status\':\n            const jobIndex = jobs.findIndex(j => j.id === data.job.id);\n            if (jobIndex !== -1) {\n                jobs[jobIndex] = data.job;\n                updateJobsTable();\n                addLogEntry(\'info\', `Job ${data.job.id} status updated to: ${data.job.status}`);\n            }\n            break;\n            \n        case \'job_completed\':\n            const completedIndex = jobs.findIndex(j => j.id === data.job.id);\n            if (completedIndex !== -1) {\n                jobs[completedIndex] = data.job;\n                updateJobsTable();\n                addLogEntry(\'info\', `Job ${data.job.id} completed successfully`);\n            }\n            break;\n            \n        case \'job_failed\':\n            const failedIndex = jobs.findIndex(j => j.id === data.job.id);\n            if (failedIndex !== -1) {\n                jobs[failedIndex] = data.job;\n                updateJobsTable();\n                addLogEntry(\'error\', `Job ${data.job.id} failed: ${data.error}`);\n            }\n            break;\n            \n        default:\n            addLogEntry(\'warning\', `Unknown message type: ${data.type}`);\n    }\n}\n\n// Trigger a demo job\nfunction triggerDemoJob() {\n    fetch(\'/webhook\', {\n        method: \'POST\',\n        headers: {\n            \'Content-Type\': \'application/json\'\n        },\n        body: JSON.stringify({\n            task: \'scrape\',\n            target: \'https://quotes.toscrape.com\',\n            options: {\n                screenshot: true\n            }\n        })\n    })\n    .then(response => response.json())\n    .then(data => {\n        addLogEntry(\'info\', `Demo job triggered with ID: ${data.jobId}`);\n    })\n    .catch(error => {\n        addLogEntry(\'error\', `Failed to trigger demo job: ${error.message}`);\n    });\n}\n\n// View job details\nfunction viewJob(jobId) {\n    const job = jobs.find(j => j.id === jobId);\n    if (job) {\n        alert(`Job Details:\\nID: ${job.id}\\nTask: ${job.task}\\nTarget: ${job.target}\\nStatus: ${job.status}\\nCreated: ${job.createdAt}`);\n    }\n}\n\n// Cancel job\nfunction cancelJob(jobId) {\n    if (confirm(\'Are you sure you want to cancel this job?\')) {\n        // In a real implementation, this would send a cancel request to the server\n        addLogEntry(\'info\', `Job ${jobId} cancellation requested`);\n    }\n}\n\n// Event Listeners\nstartAllBtn.addEventListener(\'click\', () => {\n    triggerDemoJob();\n});\n\nstopAllBtn.addEventListener(\'click\', () => {\n    addLogEntry(\'info\', \'Stop all tasks requested\');\n    // In a real implementation, this would send a stop request to the server\n});\n\nrefreshBtn.addEventListener(\'click\', () => {\n    // In a real implementation, this would refresh data from the server\n    addLogEntry(\'info\', \'Data refresh requested\');\n});\n\n// Initialize dashboard\ndocument.addEventListener(\'DOMContentLoaded\', () => {\n    addLogEntry(\'info\', \'HEX Control Nexus Dashboard initialized\');\n    \n    // Connect to WebSocket\n    connectWebSocket();\n    \n    // Simulate some initial jobs for demonstration\n    setTimeout(() => {\n        jobs = [\n            {\n                id: \'job_12345\',\n                task: \'scrape\',\n                target: \'https://quotes.toscrape.com\',\n                status: \'processing\',\n                createdAt: new Date().toISOString()\n            },\n            {\n                id: \'job_12346\',\n                task: \'api_call\',\n                target: \'https://jsonplaceholder.typicode.com/posts\',\n                status: \'completed\',\n                createdAt: new Date(Date.now() - 300000).toISOString(),\n                completedAt: new Date(Date.now() - 240000).toISOString()\n            }\n        ];\n        updateJobsTable();\n    }, 1000);\n});\n</create-file>\n</function_calls>'}